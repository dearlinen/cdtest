name: deploy

on:
  push:
    branches:
      - master
    paths-ignore:
      - README.MD
      - LICENSE

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2
      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run build
      - name: Deploy to server ğŸš€
        uses: AEnterprise/rsync-deploy@v1.0
        env:
          DEPLOY_KEY: ${{secrets.DEPLOY_KEY}}
          SERVER_IP: ${{secrets.SERVER_IP}}
          SERVER_PORT: ${{secrets.SERVER_PORT}}
          USERNAME: ${{secrets.SERVER_USERNAME}}
          SERVER_DESTINATION: ${{secrets.SERVER_PATH}}
          FOLDER: ./dist
